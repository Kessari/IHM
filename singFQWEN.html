<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartBazaar ‚Äì Create your account</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <style>
        :root {
            --bg-main: #f4efff; --card-bg: rgba(255, 255, 255, 0.92);
            --text-main: #1f1638; --text-muted: #8b86aa; --accent-start: #7b2ff7;
            --accent-end: #f107a3; --glass-border: rgba(230, 225, 255, 0.85);
            --success-glow: rgba(123, 47, 247, 0.35); --sparkle-glow: 0 0 20px rgba(241, 7, 163, 0.6);
            --error-color: #e53935; --space-xxs: 4px; --space-xs: 8px; --space-sm: 12px;
            --space-md: 18px; --space-lg: 24px; --space-xl: 32px; --radius-lg: 28px;
            --radius-xl: 36px; --glass-blur: 14px; --glass-saturate: 170%;
            --shadow-soft: 0 18px 45px rgba(87, 63, 158, 0.25);
            --shadow-card: 0 20px 60px rgba(68, 46, 131, 0.22);
            --text-xs: 12px; --text-sm: 14px; --text-md: 16px; --text-lg: 20px; --text-xl: 28px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: "Poppins", system-ui, sans-serif; background: var(--bg-main); color: var(--text-main); min-height: 100vh; }

        .page { max-width: 1200px; margin: 0 auto; padding: var(--space-xl) var(--space-md) 80px; }

        .hero { display: flex; flex-direction: column; align-items: center; text-align: center; margin-bottom: var(--space-lg); position: relative; }

        .hero::before { content: ""; position: absolute; top: -30px; left: 50%; transform: translateX(-50%); width: 180px; height: 8px; background: linear-gradient(90deg, transparent, var(--accent-start), var(--accent-end), transparent); border-radius: 10px; opacity: 0.6; }

        .hero-badge { display: inline-flex; align-items: center; gap: var(--space-xs); padding: var(--space-xs) var(--space-md); border-radius: 999px; background: rgba(255, 255, 255, 0.35); color: var(--accent-start); font-weight: 600; font-size: var(--text-xs); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); cursor: default; border: none; }

        .hero-title { margin-top: var(--space-lg); font-size: var(--text-xl); font-weight: 700; background: linear-gradient(to right, var(--accent-start), var(--accent-end)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; position: relative; display: inline-block; }

        .hero-title::after { content: ""; position: absolute; bottom: -var(--space-xs); left: 0; width: 100%; height: 4px; background: linear-gradient(90deg, transparent, var(--accent-start), transparent); border-radius: 2px; }

        .hero-subtitle { margin-top: var(--space-sm); max-width: 420px; font-size: var(--text-sm); color: #6f6a8f; line-height: 1.5; }

        .auth-card-wrapper { display: flex; justify-content: center; }

        .auth-card { background: var(--card-bg); border-radius: 40px; backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate)); -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate)); box-shadow: var(--shadow-card); padding: var(--space-xl); max-width: 980px; width: 100%; border: 1px solid var(--glass-border); position: relative; overflow: hidden; }

        .auth-card::before { content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(123, 47, 247, 0.1) 0%, transparent 70%); transform: rotate(30deg); z-index: 0; }

        .form-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: var(--space-md); position: relative; z-index: 1; }

        .form-group { display: flex; flex-direction: column; gap: var(--space-xs); position: relative; }

        .form-label { font-size: 13px; font-weight: 500; color: var(--text-main); display: flex; align-items: center; gap: var(--space-xxs); }

        .form-label::before { content: "‚Ä¢"; color: var(--accent-start); font-size: var(--text-md); line-height: 1; }

        .form-input { width: 100%; padding: var(--space-sm) var(--space-md); border-radius: 20px; border: 1px solid rgba(155, 132, 222, 0.35); background: rgba(248, 245, 255, 0.7); font-size: var(--text-sm); color: var(--text-main); outline: none; transition: all 0.3s ease; backdrop-filter: blur(8px); }

        .form-input:focus { border-color: var(--accent-start); background: rgba(255, 255, 255, 0.95); box-shadow: 0 0 0 2px var(--success-glow); transform: translateY(-1px); }

        .password-wrapper { position: relative; }

        .password-hint { font-size: 11px; color: var(--text-muted); line-height: 1.4; margin-top: 4px; }

        .toggle-password { position: absolute; right: var(--space-sm); top: 50%; transform: translateY(-50%); cursor: pointer; color: var(--accent-start); font-size: var(--text-md); user-select: none; z-index: 2; }

        .password-strength { width: 100%; max-width: 45%; height: 4px; background: #e5e1f5; border-radius: 6px; overflow: hidden; margin-top: 4px; opacity: 0; transition: opacity 0.3s ease; }

        .strength-bar { height: 100%; width: 0%; background: red; transition: width 0.3s ease, background 0.3s ease; }

        .terms-row { grid-column: 1 / 3; display: flex; align-items: center; gap: var(--space-sm); margin-top: var(--space-md); margin-bottom: var(--space-lg); position: relative; z-index: 1; }

        .terms-row input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--accent-start); cursor: pointer; border-radius: 4px; background: rgba(248, 245, 255, 0.7); border: 1px solid rgba(123, 47, 247, 0.3); backdrop-filter: blur(8px); }

        .terms-text { font-size: var(--text-xs); color: var(--text-muted); }

        .terms-link { color: var(--accent-start); font-weight: 500; text-decoration: none; position: relative; }

        .terms-link::after { content: ""; position: absolute; bottom: -1px; left: 0; width: 100%; height: 1px; background: var(--accent-start); transform: scaleX(0); transform-origin: right; transition: transform 0.3s ease; }

        .terms-link:hover::after { transform: scaleX(1); transform-origin: left; }

        .error-message { font-size: var(--text-xs); color: var(--error-color); margin-top: var(--space-xxs); display: none; }

        .actions-column { grid-column: 1 / 3; display: flex; flex-direction: column; gap: var(--space-sm); position: relative; z-index: 1; margin-top: 4px; }

        .btn-primary { border: none; border-radius: var(--radius-xl); padding: var(--space-sm) var(--space-md); background: linear-gradient(135deg, var(--accent-start), var(--accent-end)); color: #ffffff; font-size: var(--text-sm); font-weight: 600; box-shadow: var(--shadow-soft), var(--sparkle-glow); cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }

        .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 24px 50px rgba(123, 47, 247, 0.6), var(--sparkle-glow); }

        .btn-primary::after { content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(rgba(255, 255, 255, 0.2), transparent); transform: rotate(30deg); transition: all 0.6s; }

        .btn-primary:hover::after { left: 120%; }

        .glass-btn-primary { border-radius: 999px; padding: var(--space-sm) var(--space-md); background: rgba(255, 255, 255, 0.22); border: 1px solid rgba(255, 255, 255, 0.65); color: var(--text-main); font-size: var(--text-sm); font-weight: 600; display: flex; align-items: center; justify-content: center; gap: var(--space-xs); cursor: pointer; backdrop-filter: blur(14px) saturate(180%); -webkit-backdrop-filter: blur(14px) saturate(180%); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35); transition: all 0.3s ease; opacity: 0.85; }

        .glass-btn-primary:hover { transform: translateY(-1px); background: rgba(255, 255, 255, 0.3); box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4); }

        .social-divider { text-align: center; font-size: 11px; color: var(--text-muted); margin: 12px 0; }

        .social-row { display: flex; gap: var(--space-md); justify-content: space-between; }

        .social-btn { flex: 1; border-radius: 999px; padding: var(--space-sm) var(--space-md); border: 1px solid rgba(255, 255, 255, 0.65); background: rgba(255, 255, 255, 0.22); color: #111827; font-size: var(--text-xs); font-weight: 600; display: flex; align-items: center; justify-content: center; gap: var(--space-xs); cursor: pointer; backdrop-filter: blur(14px) saturate(180%); -webkit-backdrop-filter: blur(14px) saturate(180%); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35); transition: all 0.3s ease; }

        .social-btn:hover { transform: translateY(-1px); background: rgba(255, 255, 255, 0.3); box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4); }

        .social-btn-facebook { color: #1b3c88; border-color: rgba(59, 89, 152, 0.45); }
        .social-btn-google { color: #b83227; border-color: rgba(219, 68, 55, 0.45); }

        .glass-pill-icon { font-size: 16px; display: inline-flex; align-items: center; justify-content: center; width: 18px; height: 18px; }

        .modal-backdrop { position: fixed; inset: 0; background: rgba(15, 7, 40, 0.75); display: none; align-items: center; justify-content: center; z-index: 999; backdrop-filter: blur(10px); opacity: 0; transition: opacity 0.3s ease; }

        .modal-backdrop.show { display: flex; opacity: 1; }

        .modal-card { background: rgba(255, 255, 255, 0.95); border-radius: 24px; padding: var(--space-lg) var(--space-md); max-width: 360px; width: 90%; text-align: center; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.45); backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(18px); border: 1px solid rgba(230, 225, 255, 0.7); animation: popIn 0.35s ease-out; }

        .modal-emoji { font-size: 40px; margin-bottom: var(--space-xs); }
        .modal-title { font-size: var(--text-md); font-weight: 700; margin-bottom: var(--space-xs); color: var(--text-main); }
        .modal-text { font-size: var(--text-sm); color: var(--text-muted); margin-bottom: var(--space-sm); line-height: 1.5; }

        @media (max-width: 840px) {
            .hero { margin-bottom: var(--space-lg); }
            .auth-card { padding: var(--space-lg) var(--space-md); border-radius: 32px; box-shadow: 0 12px 30px rgba(68, 46, 131, 0.16); }
            .form-grid { grid-template-columns: 1fr; }
            .terms-row, .actions-column { grid-column: 1 / 2; }
            .hero-title { font-size: 24px; }
            .social-row { flex-wrap: nowrap; gap: var(--space-sm); }
            .social-btn { flex: 1; min-width: 0; padding: var(--space-xs) var(--space-sm); font-size: 11px; }
            .social-btn span:not(.glass-pill-icon) { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
            .form-group { gap: 4px; } /* ‚úÖ ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑŸÖÿ≥ÿßŸÅÿ© ŸÅŸä ÿßŸÑŸÖŸàÿ®ÿßŸäŸÑ */
        }

        @media (max-width: 500px) {
            .social-btn { font-size: var(--text-xs); padding: var(--space-xs) var(--space-sm); }
        }

        @media (max-width: 420px) {
            .auth-card { border-radius: 28px; }
            .social-row { gap: var(--space-xs); }
            .social-btn { padding: 8px 10px; font-size: 10px; }
            .glass-pill-icon { font-size: 14px; width: 16px; height: 16px; }
        }

        @media (max-width: 360px) {
            .social-btn span:not(.glass-pill-icon) { display: none; }
            .social-btn { justify-content: center; padding: 10px; }
            .glass-pill-icon { font-size: 16px; width: 18px; height: 18px; }
        }
    </style>
</head>
<body>
    <div class="page">
        <section class="hero">
            <div class="hero-badge">
                <span>‚ú®</span> New in DZ ¬∑ SmartBazaar
            </div>
            <h1 class="hero-title">Create your account</h1>
            <p class="hero-subtitle">
                Join SmartBazaar securely in seconds ‚Äî trusted by Algerian sellers.
            </p>
        </section>

        <section class="auth-card-wrapper">
            <div class="auth-card">
                <form class="form-grid" action="#" method="post" novalidate>
                    <div class="form-group">
                        <label class="form-label" for="firstName">First Name</label>
                        <input class="form-input" id="firstName" name="firstName" type="text" placeholder="First Name" required aria-describedby="error-firstName" />
                        <span id="error-firstName" class="error-message">First name must be at least 2 characters.</span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="lastName">Last Name</label>
                        <input class="form-input" id="lastName" name="lastName" type="text" placeholder="Last Name" required aria-describedby="error-lastName" />
                        <span id="error-lastName" class="error-message">Last name must be at least 2 characters.</span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="email">Email Address</label>
                        <input class="form-input" id="email" name="email" type="email" placeholder="email@example.com" required aria-describedby="error-email" />
                        <span id="error-email" class="error-message" aria-live="polite">Please enter a valid email address.</span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="phone">Phone Number</label>
                        <input class="form-input" id="phone" name="phone" type="tel" placeholder="Phone (+213)" required aria-describedby="error-phone" />
                        <span id="error-phone" class="error-message" aria-live="polite">Please enter a valid phone number (ex: +213 6X XX XX XX).</span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="password">Create Password</label>
                        <div class="password-wrapper">
                            <input class="form-input" id="password" name="password" type="password" placeholder="At least 8 characters" required aria-describedby="error-password" />
                            <span class="toggle-password" data-target="password">üëÅÔ∏è</span>
                        </div>
                        <small class="password-hint">Your password is encrypted and never shared.</small>
                        <div class="password-strength">
                            <div class="strength-bar"></div>
                        </div>
                        <span id="error-password" class="error-message" aria-live="polite">For your security, use at least 8 characters.</span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="confirmPassword">Confirm Password</label>
                        <div class="password-wrapper">
                            <input class="form-input" id="confirmPassword" name="confirmPassword" type="password" placeholder="Repeat your password" required aria-describedby="error-confirmPassword" />
                            <span class="toggle-password" data-target="confirmPassword">üëÅÔ∏è</span>
                        </div>
                        <span id="error-confirmPassword" class="error-message" aria-live="polite">Passwords do not match.</span>
                    </div>

                    <div class="terms-row">
                        <input type="checkbox" id="terms" name="terms" />
                        <label class="terms-text" for="terms">
                            I agree to the
                            <a href="#" class="terms-link">Terms &amp; Privacy Policy</a>
                        </label>
                        <span id="error-terms" class="error-message" aria-live="polite">Please agree to the terms to continue.</span>
                    </div>

                    <div class="actions-column">
                        <button type="submit" class="btn-primary" id="submitBtn">
                            <span class="btn-text">Create secure account</span>
                        </button>

                        <button type="button" class="glass-btn-primary sign-in-btn">
                            <span>I already have an account</span>
                        </button>

                        <div class="social-divider">or continue with</div>

                        <div class="social-row">
                            <button type="button" class="social-btn social-btn-facebook">
                                <span class="glass-pill-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                        <path d="M24 12.0733C24 5.40546 18.6274 0 12 0C5.37258 0 0 5.40546 0 12.0733C0 18.0995 4.38823 23.0943 10.125 24V15.5633H7.07813V12.0733H10.125V9.41343C10.125 6.38755 11.9165 4.71615 14.6576 4.71615C15.9705 4.71615 17.3438 4.95195 17.3438 4.95195V7.92313H15.8306C14.3399 7.92313 13.875 8.85379 13.875 9.80857V12.0733H17.2031L16.6711 15.5633H13.875V24C19.6118 23.0943 24 18.0995 24 12.0733Z" fill="currentColor"/>
                                    </svg>
                                </span>
                                <span>Continue with Facebook</span>
                            </button>

                            <button type="button" class="social-btn social-btn-google">
                                <span class="glass-pill-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                                    </svg>
                                </span>
                                <span>Continue with Google</span>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </section>
    </div>

    <!-- ‚úÖ Success Modal -->
    <div id="successModal" class="modal-backdrop">
        <div class="modal-card">
            <div class="modal-emoji">üéâ</div>
            <div class="modal-title">Account successfully created</div>
            <div class="modal-text">
                Welcome to SmartBazaar ‚Äî your new gateway to trusted DZ sellers.<br>
                You can now start exploring deals and verified stores.
            </div>
            <button type="button" id="closeModalBtn" class="btn-primary" style="width:100%;">Start exploring</button>
        </div>
    </div>

    <!-- ‚úÖ Terms Modal -->
    <div id="termsModal" class="modal-backdrop">
        <div class="modal-card">
            <div class="modal-title">Terms &amp; Privacy</div>
            <div class="modal-text" style="text-align:left; font-size:var(--text-xs);">
                This is a placeholder for your Terms &amp; Privacy Policy.<br><br>
                ‚Ä¢ Explain how user data is stored and protected.<br>
                ‚Ä¢ Mention what information you collect and why.<br>
                ‚Ä¢ Clarify how users can delete or update their account.<br><br>
                Replace this text later with your real legal content.
            </div>
            <button type="button" id="closeTermsBtn" class="btn-primary" style="width:100%;">Close</button>
        </div>
    </div>

    <script>
        // ‚úÖ Cache DOM elements
        const form = document.querySelector('form');
        const submitBtn = document.getElementById('submitBtn');
        const termsLink = document.querySelector('.terms-link');
        const passwordInput = document.getElementById('password');
        const strengthBar = document.querySelector('.strength-bar');
        const passwordStrength = document.querySelector('.password-strength');

        // ‚úÖ Validation rules
        const validations = {
            firstName: { test: () => document.getElementById('firstName').value.trim().length >= 2, error: 'error-firstName' },
            lastName: { test: () => document.getElementById('lastName').value.trim().length >= 2, error: 'error-lastName' },
            email: { test: () => /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(document.getElementById('email').value.trim()), error: 'error-email' },
            phone: { test: () => /^\+?[0-9]{8,15}$/.test(document.getElementById('phone').value.replace(/\s/g, '')), error: 'error-phone' },
            password: { test: () => document.getElementById('password').value.length >= 8, error: 'error-password' },
            confirmPassword: { test: () => document.getElementById('password').value === document.getElementById('confirmPassword').value && document.getElementById('confirmPassword').value, error: 'error-confirmPassword' },
            terms: { test: () => document.getElementById('terms').checked, error: 'error-terms' }
        };

        // ‚úÖ ÿ•ÿ∏Ÿáÿßÿ±/ÿ•ÿÆŸÅÿßÿ° ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑŸÇŸàÿ© ÿπŸÜÿØ focus/blur
        passwordInput?.addEventListener('focus', () => {
            if (passwordStrength) passwordStrength.style.opacity = '1';
        });

        passwordInput?.addEventListener('blur', () => {
            if (!passwordInput.value && passwordStrength) {
                passwordStrength.style.opacity = '0';
            }
        });

        // ‚úÖ ÿ¥ÿ±Ÿäÿ∑ ŸÇŸàÿ© ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±
        passwordInput?.addEventListener('input', () => {
            const value = passwordInput.value;
            let strength = 0;

            if (value.length >= 8) strength++;
            if (/[A-Z]/.test(value)) strength++;
            if (/[0-9]/.test(value)) strength++;
            if (/[^A-Za-z0-9]/.test(value)) strength++;

            const levels = [
                { width: '0%', color: 'transparent' },
                { width: '25%', color: '#e53935' },
                { width: '50%', color: '#fbc02d' },
                { width: '75%', color: '#43a047' },
                { width: '100%', color: '#2e7d32' }
            ];

            if (strengthBar) {
                strengthBar.style.width = levels[strength].width;
                strengthBar.style.background = levels[strength].color;
            }
        });

        // ‚úÖ Submit form
        form.addEventListener('submit', handleSubmit);

        // ‚úÖ Links & Modals
        termsLink?.addEventListener('click', e => { e.preventDefault(); setupModal('termsModal', 'closeTermsBtn')?.classList.add('show'); });
        
        document.addEventListener('click', e => {
            if (e.target.classList.contains('toggle-password')) {
                const input = document.getElementById(e.target.dataset.target);
                const isPassword = input.type === 'password';
                input.type = isPassword ? 'text' : 'password';
                e.target.textContent = isPassword ? 'üëÅÔ∏è‚Äçüó®Ô∏è' : 'üëÅÔ∏è';
            }
        });

        // ‚úÖ Demo buttons
        document.querySelectorAll('.sign-in-btn, .social-btn').forEach(btn => {
            btn.addEventListener('click', () => alert('This feature would be implemented here.'));
        });

        // ‚úÖ ‚úÖ ‚úÖ ÿ•ÿµŸÑÿßÿ≠ ÿ™ÿ∞ÿ®ÿ∞ÿ® ÿ±ÿ≥ÿßŸÑÿ© "Passwords do not match"
        function setupConfirmPasswordValidation() {
            const password = document.getElementById('password');
            const confirmPassword = document.getElementById('confirmPassword');
            const error = document.getElementById('error-confirmPassword');
            
            if (!password || !confirmPassword || !error) return;

            let isTyping = false;
            let timer;

            // ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ŸÅŸä ÿ£Ÿä ŸÖŸÜ ÿßŸÑÿ≠ŸÇŸÑŸäŸÜ
            [password, confirmPassword].forEach(input => {
                input.addEventListener('input', () => {
                    isTyping = true;
                    clearTimeout(timer);
                    error.style.display = 'none'; // ÿ•ÿÆŸÅÿßÿ° ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÉÿ™ÿßÿ®ÿ©

                    // ÿ™ÿ£ÿÆŸäÿ± 500ms ÿ®ÿπÿØ ÿßŸÑÿ™ŸàŸÇŸÅ ÿπŸÜ ÿßŸÑŸÉÿ™ÿßÿ®ÿ©
                    timer = setTimeout(() => {
                        isTyping = false;
                        validateConfirmPassword();
                    }, 500);
                });

                // ÿ™ÿ£ŸÉŸäÿØ ŸÅŸàÿ±Ÿä ÿπŸÜÿØ ÿßŸÑÿÆÿ±Ÿàÿ¨ ŸÖŸÜ ÿßŸÑÿ≠ŸÇŸÑ
                input.addEventListener('blur', () => {
                    setTimeout(() => {
                        if (!isTyping) {
                            validateConfirmPassword();
                        }
                    }, 100);
                });
            });

            function validateConfirmPassword() {
                const isValid = password.value === confirmPassword.value && confirmPassword.value !== '';
                error.style.display = isValid ? 'none' : 'block';
            }
        }

        // ‚úÖ Delayed validation ŸÑŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑÿ£ÿÆÿ±Ÿâ
        function delayedValidate(inputId, errorId, testFn, delay = 3000) {
            const input = document.getElementById(inputId);
            const error = document.getElementById(errorId);
            let timer;

            if (!input || !error) return;

            input.addEventListener('input', () => {
                clearTimeout(timer);
                error.style.display = 'none';

                timer = setTimeout(() => {
                    if (!testFn()) {
                        error.style.display = 'block';
                    }
                }, delay);
            });

            input.addEventListener('blur', () => {
                clearTimeout(timer);
                if (!testFn()) {
                    error.style.display = 'block';
                }
            });
        }

        // ‚úÖ ÿßÿ≥ÿ™ÿØÿπÿßÿ° ÿßŸÑÿØÿßŸÑÿ© ŸÑÿ•ÿµŸÑÿßÿ≠ ÿ™ÿ∞ÿ®ÿ∞ÿ® confirmPassword
        setupConfirmPasswordValidation();

        // ‚úÖ delayed validation ŸÑŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑÿ£ÿÆÿ±Ÿâ
        delayedValidate('password', 'error-password', validations.password.test, 3000);
        delayedValidate('firstName', 'error-firstName', validations.firstName.test, 3000);
        delayedValidate('lastName', 'error-lastName', validations.lastName.test, 3000);
        delayedValidate('email', 'error-email', validations.email.test, 5000);
// ‚úÖ ÿ£ÿ∂ŸÅŸÜÿß ŸÅŸÇÿ∑ Ÿáÿ∞ÿß ÿßŸÑÿ≥ÿ∑ÿ± ÿ™ÿ≠ÿ™ ÿ®ÿßŸÇŸä delayedValidate:
delayedValidate('phone', 'error-phone', validations.phone.test, 3000);


        function handleSubmit(e) {
            e.preventDefault();
            clearErrors();
            
            let isValid = true;
            for (const key in validations) {
                if (!validations[key].test()) {
                    showError(validations[key].error);
                    isValid = false;
                }
            }

            if (isValid) {
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<span class="btn-text">Creating...</span>';
                setTimeout(() => {
                    // ‚úÖ ‚úÖ ‚úÖ ÿ•ÿ∏Ÿáÿßÿ± Success Modal ÿ®ÿπÿØ ÿßŸÑŸÜÿ¨ÿßÿ≠
                    const modal = setupModal('successModal', 'closeModalBtn');
                    if (modal) {
                        modal.classList.add('show');

                        // üîí ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ•ŸÑŸâ Home ŸÅŸÇÿ∑ ÿ®ÿπÿØ ÿßŸÑŸÜÿ¨ÿßÿ≠
                        document.getElementById('closeModalBtn').onclick = () => {
                            window.location.href = "homeFINAL.html";
                        };
                    }
                    form.reset();
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<span class="btn-text">Create secure account</span>';
                    if (strengthBar) {
                        strengthBar.style.width = '0%';
                        strengthBar.style.background = 'transparent';
                    }
                    if (passwordStrength) {
                        passwordStrength.style.opacity = '0';
                    }
                }, 800);
            }
        }

        function clearErrors() {
            document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
        }

        function showError(id) {
            const el = document.getElementById(id);
            if (el) el.style.display = 'block';
        }

        function setupModal(modalId, closeBtnId) {
            const modal = document.getElementById(modalId);
            const closeBtn = document.getElementById(closeBtnId);
            if (!modal || !closeBtn) return null;
            
            closeBtn.addEventListener('click', () => modal.classList.remove('show'));
            modal.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('show'); });
            return modal;
        }
       
    </script>
</body>
</html>
